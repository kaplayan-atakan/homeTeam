# homeTeam - Sistem Mimarisi DokÃ¼mantasyonu

## ğŸ—ï¸ Genel Sistem Mimarisi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   React Native App     â”‚        Web Dashboard (Future)        â”‚
â”‚   â€¢ Redux Toolkit      â”‚        â€¢ React.js                    â”‚
â”‚   â€¢ React Navigation   â”‚        â€¢ Admin Panel                 â”‚
â”‚   â€¢ Socket.IO Client   â”‚        â€¢ Analytics                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                              HTTP/HTTPS + WebSocket
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       API GATEWAY LAYER                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   NestJS Backend Server (Port: 3001)                          â”‚
â”‚   â€¢ Global Exception Filter                                    â”‚
â”‚   â€¢ CORS Configuration                                         â”‚
â”‚   â€¢ Request/Response Interceptors                              â”‚
â”‚   â€¢ Rate Limiting (Future)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AUTH MIDDLEWARE   â”‚  â”‚   BUSINESS LOGIC    â”‚  â”‚   WEBSOCKET LAYER   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ JWT Strategy      â”‚  â”‚ â€¢ Auth Module       â”‚  â”‚ â€¢ Socket.IO Gateway â”‚
â”‚ â€¢ Role Guards       â”‚  â”‚ â€¢ Users Module      â”‚  â”‚ â€¢ Real-time Events  â”‚
â”‚ â€¢ Permission Check  â”‚  â”‚ â€¢ Groups Module     â”‚  â”‚ â€¢ Room Management   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Tasks Module      â”‚  â”‚ â€¢ User Presence     â”‚
                         â”‚ â€¢ Notifications     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ â€¢ Music Integration â”‚
                         â”‚ â€¢ Error Logging     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     MongoDB             â”‚      Redis        â”‚   External APIs   â”‚
â”‚   (Port: 27018)         â”‚   (Port: 6380)    â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ users                 â”‚ â€¢ Sessions (*)    â”‚ â€¢ Spotify API     â”‚
â”‚ â€¢ groups                â”‚ â€¢ Cache (*)       â”‚ â€¢ YouTube API     â”‚
â”‚ â€¢ tasks                 â”‚ â€¢ Rate Limits (*) â”‚ â€¢ Google OAuth    â”‚
â”‚ â€¢ notifications         â”‚                   â”‚ â€¢ Facebook OAuth  â”‚
â”‚ â€¢ musicintegrations     â”‚                   â”‚                   â”‚
â”‚ â€¢ errorlogs             â”‚                   â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

(*) HenÃ¼z aktif kullanÄ±lmÄ±yor ama altyapÄ± hazÄ±r
```

## ğŸ” Authentication & Authorization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚    â”‚   Server    â”‚    â”‚  Database   â”‚    â”‚   Guards    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
   1.  â”‚â”€â”€Login Requestâ”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   2.  â”‚                  â”‚â”€â”€Find Userâ”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚â—€â”€User Dataâ”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   3.  â”‚                  â”‚â”€â”€Password Checkâ”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   4.  â”‚â—€â”€JWT Tokenâ”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   5.  â”‚â”€â”€API Requestâ”€â”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚  (with Bearer)    â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   6.  â”‚                  â”‚â”€â”€Verify Tokenâ”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚â—€â”€Token Validâ”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   7.  â”‚                  â”‚â”€â”€Role Checkâ”€â”€â”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚â—€â”€Permissionsâ”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   8.  â”‚â—€â”€Responseâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
```

## ğŸ“Š Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Users       â”‚         â”‚     Groups      â”‚         â”‚     Tasks       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id (ObjectId)  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ owner           â”‚         â”‚ _id (ObjectId)  â”‚
â”‚ firstName       â”‚         â”‚ members[]       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ groupId         â”‚
â”‚ lastName        â”‚         â”‚ â€¢ userId        â”‚         â”‚ title           â”‚
â”‚ email           â”‚         â”‚ â€¢ role          â”‚         â”‚ description     â”‚
â”‚ role            â”‚         â”‚ â€¢ permissions   â”‚         â”‚ status          â”‚
â”‚ groups[]        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ settings        â”‚         â”‚ priority        â”‚
â”‚ notificationPrefâ”‚         â”‚ stats           â”‚         â”‚ assignedTo      â”‚â—€â”€â”€â”€â”
â”‚ lastLoginAt     â”‚         â”‚ subscription    â”‚         â”‚ createdBy       â”‚â—€â”€â”€â”€â”¤
â”‚ createdAt       â”‚         â”‚ activityLog[]   â”‚         â”‚ dueDate         â”‚    â”‚
â”‚ updatedAt       â”‚         â”‚ createdAt       â”‚         â”‚ comments[]      â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ updatedAt       â”‚         â”‚ activityLog[]   â”‚    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ createdAt       â”‚    â”‚
                                                        â”‚ updatedAt       â”‚    â”‚
                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  Notifications  â”‚         â”‚ Music Integrationsâ”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚ _id (ObjectId)  â”‚         â”‚ _id (ObjectId)  â”‚                              â”‚
â”‚ userId          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ userId          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ title           â”‚         â”‚ provider        â”‚
â”‚ message         â”‚         â”‚ accessToken     â”‚
â”‚ type            â”‚         â”‚ refreshToken    â”‚
â”‚ isRead          â”‚         â”‚ playlists[]     â”‚
â”‚ priority        â”‚         â”‚ preferences     â”‚
â”‚ metadata        â”‚         â”‚ lastSyncAt      â”‚
â”‚ createdAt       â”‚         â”‚ createdAt       â”‚
â”‚ readAt          â”‚         â”‚ updatedAt       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Real-time Communication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚    â”‚  WebSocket  â”‚    â”‚   Server    â”‚    â”‚  Database   â”‚
â”‚             â”‚    â”‚   Gateway   â”‚    â”‚   Events    â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
   1.  â”‚â”€â”€Connectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   2.  â”‚                  â”‚â”€â”€Authenticateâ”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚â—€â”€User Validâ”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   3.  â”‚                  â”‚â”€â”€Join Roomsâ”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚  (user groups)   â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   4.  â”‚â”€â”€Task Createdâ”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   5.  â”‚                  â”‚â”€â”€Process Eventâ”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   6.  â”‚                  â”‚                  â”‚â”€â”€Save to DBâ”€â”€â”€â”€â”€â–¶â”‚
       â”‚                  â”‚                  â”‚â—€â”€Confirmâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   7.  â”‚                  â”‚â—€â”€Broadcastâ”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚  (to room)       â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   8.  â”‚â—€â”€Live Updateâ”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
```

## ğŸ”§ Error Handling & Logging System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR HANDLING FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚    â”‚   Guard/    â”‚    â”‚   Global    â”‚    â”‚   Error     â”‚
â”‚   Incoming  â”‚    â”‚ Validation  â”‚    â”‚ Exception   â”‚    â”‚   Logger    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
   1.  â”‚â”€â”€API Callâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   2.  â”‚                  â”‚â”€â”€Validateâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   3.  â”‚                  â”‚â—€â”€Errorâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   4.  â”‚                  â”‚                  â”‚â”€â”€Catch Errorâ”€â”€â”€â”€â–¶â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   5.  â”‚                  â”‚                  â”‚                  â”‚â”€â”€Log to DBâ”€â”€â”
       â”‚                  â”‚                  â”‚                  â”‚             â”‚
   6.  â”‚                  â”‚                  â”‚                  â”‚â”€â”€Generate IDâ”€â”‚
       â”‚                  â”‚                  â”‚                  â”‚ (Correlation)â”‚
       â”‚                  â”‚                  â”‚                  â”‚             â”‚
   7.  â”‚â—€â”€Error Responseâ”€â”€â”‚â—€â”€Formatted Errorâ”€â”‚â—€â”€Processedâ”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
       â”‚  (with ID)       â”‚  (User Friendly) â”‚                  â”‚             â”‚
       â”‚                  â”‚                  â”‚                  â”‚             â”‚
                                                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB       â”‚
â”‚  errorlogs      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ correlationId   â”‚
â”‚ message         â”‚
â”‚ level           â”‚
â”‚ category        â”‚
â”‚ statusCode      â”‚
â”‚ stack           â”‚
â”‚ context         â”‚
â”‚ metadata        â”‚
â”‚ isResolved      â”‚
â”‚ createdAt       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸµ Music Integration Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MUSIC INTEGRATION FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚    â”‚   Music     â”‚    â”‚  External   â”‚    â”‚  Database   â”‚
â”‚             â”‚    â”‚  Service    â”‚    â”‚   APIs      â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
   1.  â”‚â”€â”€Connect Requestâ”€â–¶â”‚                  â”‚                  â”‚
       â”‚  (Spotify)        â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   2.  â”‚                  â”‚â”€â”€OAuth Requestâ”€â”€â”€â–¶â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   3.  â”‚                  â”‚â—€â”€Access Tokenâ”€â”€â”€â”€â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
   4.  â”‚                  â”‚â”€â”€Store Tokenâ”€â”€â”€â”€â”€â”‚                  â”‚â”€â”€Store Integrationâ”€â”€â–¶
       â”‚                  â”‚                  â”‚                  â”‚                     â”‚
   5.  â”‚                  â”‚â”€â”€Get Playlistsâ”€â”€â”€â–¶â”‚                  â”‚                     â”‚
       â”‚                  â”‚                  â”‚                  â”‚                     â”‚
   6.  â”‚                  â”‚â—€â”€Playlist Dataâ”€â”€â”€â”‚                  â”‚                     â”‚
       â”‚                  â”‚                  â”‚                  â”‚                     â”‚
   7.  â”‚â—€â”€Connectedâ”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚â—€â”€Save Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
```

## ğŸ“± Mobile App Connection Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MOBILE APP INTEGRATION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

React Native App Components:
â”œâ”€â”€ Authentication
â”‚   â”œâ”€â”€ LoginScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ POST /auth/login
â”‚   â””â”€â”€ RegisterScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ POST /auth/register
â”‚
â”œâ”€â”€ Groups Management
â”‚   â”œâ”€â”€ GroupListScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET /groups
â”‚   â”œâ”€â”€ GroupDetailScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET /groups/:id
â”‚   â””â”€â”€ CreateGroupScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ POST /groups
â”‚
â”œâ”€â”€ Tasks Management
â”‚   â”œâ”€â”€ TasksScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET /tasks
â”‚   â”œâ”€â”€ CreateTaskScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ POST /tasks
â”‚   â””â”€â”€ TaskDetailScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET /tasks/:id
â”‚
â”œâ”€â”€ Profile Management
â”‚   â””â”€â”€ ProfileScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET/PATCH /users/profile
â”‚
â”œâ”€â”€ Notifications
â”‚   â””â”€â”€ NotificationsScreen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GET /notifications
â”‚
â””â”€â”€ Real-time Features
    â””â”€â”€ WebSocket Connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ WS /ws
```

## ğŸ”„ Data Flow Summary

```
1. Client Request â†’ API Gateway â†’ Authentication â†’ Guards â†’ Business Logic
2. Business Logic â†’ Database Operations â†’ Response Formation
3. Real-time Events â†’ WebSocket Broadcasting â†’ Client Updates
4. Errors â†’ Global Handler â†’ Database Logging â†’ Client Response
5. External Integrations â†’ Service Layer â†’ Database Storage
```

## ğŸ“Š Performance & Scalability

```
Current Infrastructure:
â”œâ”€â”€ Database: MongoDB (Document-based, Horizontal scaling ready)
â”œâ”€â”€ Cache: Redis (Ready for session management & caching)
â”œâ”€â”€ API: NestJS (Microservices architecture ready)
â”œâ”€â”€ Real-time: Socket.IO (Clustered deployment ready)
â””â”€â”€ Monitoring: Comprehensive error logging & correlation tracking

Scaling Points:
â”œâ”€â”€ API: Load balancer + Multiple instances
â”œâ”€â”€ Database: MongoDB Atlas cluster
â”œâ”€â”€ Cache: Redis Cluster
â”œâ”€â”€ Files: Cloud storage integration (AWS S3, etc.)
â””â”€â”€ Monitoring: Advanced APM tools
```

---

**homeTeam Backend Architecture v1.0**  
*Production-Ready Enterprise-Grade API*
